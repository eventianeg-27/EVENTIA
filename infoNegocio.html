<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Información del Negocio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="navbar.css">
  <script type="module" src="navbar.js"></script>
  <script type="module" src="infoNegocio.js"></script>
  <link rel="stylesheet" href="infoNegocio.css">
</head>

<body>
  <!-- Contenedor para la barra -->
  <div id="navbar-container"></div>

  <div class="container py-2 mt-0">
    <h2 class="text-center mb-2 mt-0" id="tituloEspecialidad"></h2>
    <div id="contenedorNegocios" class="row"></div>
  </div>
  <script>
    // Cargar solo el contenido del navbar (no toda una página HTML)
    fetch("navbar.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("navbar-container").innerHTML = html;

        // --- Botón "Reservar" solo si estamos en infoNegocio.html ---
        if (window.location.pathname.includes("infoNegocio.html")) {
          const extraButtons = document.getElementById("extra-buttons");
          if (extraButtons) {
            const btnReservar = document.createElement("button");
            btnReservar.className = "btn btn-success ms-2 btn-reservar";
            btnReservar.textContent = "Reservar";
            btnReservar.onclick = () => irAReservar();
            extraButtons.appendChild(btnReservar);
          }
        }

        // logo redirige al inicio
        const logo = document.querySelector(".logo-navbar");
        if (logo) {
          logo.addEventListener("click", e => {
            e.preventDefault();
            window.location.href = "principalpag.html";
          });
        }

        // Manejo de categorías Después de insertar el navbar, agregar funcionalidad
        document.querySelectorAll(".dropdown-item").forEach(item => {
          item.addEventListener("click", e => {
            e.preventDefault();
            const categoria = item.dataset.categoria;
            if (categoria) {
              window.location.href = `negocios.html?categoria=${encodeURIComponent(categoria)}`;
            }
          });
        });


        // Ocultar botones si hay sesión activa
        const userData = localStorage.getItem("usuarioLogueado");
        if (userData) {
          //// Ocultar botones de login/registro
          const btnLogin = document.getElementById("btnLogin");
          if (btnLogin) btnLogin.style.display = "none";

          const btnRegistro = document.querySelector('a[href="Registro.html"]');
          if (btnRegistro) btnRegistro.style.display = "none";

        }


        // Botón Regresar
        const btnRegresar = document.getElementById("btnRegresar");
        if (btnRegresar) {
          btnRegresar.addEventListener("click", () => {
            const userData = localStorage.getItem("usuarioLogueado");

            if (userData) {
              window.location.href = "negocios.html";
            } else {
              window.location.href = "index.html";
            }
          });
        }


      });
  </script>

  <div class="row align-items-start gx-5">
    <!-- Columna izquierda: Galería -->
    <div class="col-md-5 mb-3 mb-md-0 galeria-derecha">
      <div id="galeriaNegocio" class="row g-3"></div>
    </div>


    <!-- Columna derecha: Información del negocio -->
    <div class="col-md-6 ps-5 mover-derecha">
      <div id="contenidoNegocio" class="card p-4 shadow-sm"></div>

      <div class="d-flex justify-content-end mt-4 gap-2">
        <button class="btn btn-secondary" id="btnRegresar">Regresar</button>
        
      </div>
    </div>
    <!-- Agregar este script para que funcione el menú desplegable de categorías -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>